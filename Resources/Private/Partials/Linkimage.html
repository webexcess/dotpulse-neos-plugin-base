{namespace neos=TYPO3\Neos\ViewHelpers}
{namespace media=TYPO3\Media\ViewHelpers}
{namespace base=Dotpulse\Base\ViewHelpers}
<f:if condition="{neos:rendering.inBackend()}">
	<f:then>
		<f:if condition="{link}"><div class="img-link" data-live-href="{link}"{f:if(condition:title,then: ' title="{title}"')}></f:if>
		<f:render partial="Plainimage" arguments="{_all}" />
		<f:if condition="{link}"></div></f:if>
	</f:then>
	<f:else>
		<f:if condition="{link}">
			<f:then>
				<a href="{link}"{f:if(condition:title,then: ' title="{title}"')} class="img-link"{f:if(condition:'{base:isExternal(url:link)}', then: ' target="_blank"')}>
					<f:render partial="Plainimage" arguments="{_all}" />
				</a>
			</f:then>
			<f:else>
				<f:if condition="{lightbox}">
					<f:then>
						<a href="{media:uri.image(image:lighboxImage)}"{f:if(condition:title,then: ' title="{title}"')} class="img-link lightbox" data-size="{lighboxImage.width}x{lighboxImage.height}">
							<f:render partial="Plainimage" arguments="{_all}" />
						</a>
					</f:then>
					<f:else>
						<f:render partial="Plainimage" arguments="{_all}" />
					</f:else>
				</f:if>
			</f:else>
		</f:if>
	</f:else>
</f:if>
