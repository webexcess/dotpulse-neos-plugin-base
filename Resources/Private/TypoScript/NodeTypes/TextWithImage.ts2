prototype(NodeTypes:TextWithImage) {
	templatePath = 'resource://Dotpulse.Base/Private/Templates/NodeTypes/TextWithImage.html'
	configuration = ${Configuration.setting('Dotpulse.Base')}
	@override.configuration = ${this.configuration}
	alignment = ${q(node).property('alignment') ? q(node).property('alignment') : this.configuration.TextWithImage.defaultAlignment}
	@override.alignment = ${this.alignment}

	needRow = ${alignment == 'left' || alignment == 'right' ? true : false}
	@override.needRow = ${this.needRow}
	colClasses = ${q(node).parent().parent().is('[instanceof TYPO3.Neos:Document]') ? configuration.TextWithImage.firstlevel[alignment] : configuration.TextWithImage.nested[alignment]}

	alternativeText = ${q(node).property('alternativeText') ? q(node).property('alternativeText') : q(node).property('image').caption}

	attributes.class = TypoScript:RawArray {
		container = ${q(node).parent().parent().is('[instanceof TYPO3.Neos:Document]') ? configuration.TextWithImage.containerClass : needRow ? configuration.TextWithImage.rowClass : ''}
		lead = ${q(node).property('lead') ? configuration.TextWithImage.leadClass : ''}
		margin = ${q(node).property('bigmargin') ? configuration.TextWithImage.marginClass : ''}
		alignment = ${'pos-' + alignment}
	}

	attributesRow = TypoScript:Attributes {
		class = TypoScript:RawArray {
			row = ${configuration.TextWithImage.rowClass}
		}
	}

}
